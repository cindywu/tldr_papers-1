!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){const o=t(1),r=t(2),s={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, HEAD, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type"};const i={headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}};addEventListener("fetch",e=>{e.respondWith(async function(e){if("OPTIONS"===e.method)return function(e){return null!==e.headers.get("Origin")&&null!==e.headers.get("Access-Control-Request-Method")&&null!==e.headers.get("Access-Control-Request-Headers")?new Response(null,{headers:s}):new Response(null,{headers:{Allow:"GET, HEAD, POST, OPTIONS"}})}(e);const n=new o;n.post(".*/get_prompt",e=>async function(e){const n=await e.json(),t=r.generatePrompt(n.adjectives,n.experiences,n.QApairs,n.question);return new Response(JSON.stringify({prompt:t}),i)}(e)),n.post(".*/get_response",e=>async function(e){const n='My second grader asked me what this passage means:\n\n"""'+(await e.json()).abstract+' \n"""\n\nI rephrased it for him, in plain language a second grader can understand:\n\n"""';console.log("prompt:"),console.log(n);const t={prompt:n+"\n",temperature:.6,max_tokens:150,top_p:1,frequency_penalty:.2,presence_penalty:0,stop:['"""'],n:8},o=await(await(e=>{const n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+OPENAI_KEY},body:JSON.stringify(e)};return console.log("sending openai request with:"),console.log(n),fetch("https://api.openai.com/v1/engines/davinci/completions",n)})(t)).json();return new Response(JSON.stringify(o),i)}(e)),n.get("/",()=>new Response("Hello Cindy! Good to see you.")),n.post("/",()=>new Response("Good to see you."));return await n.route(e)}(e.request))})},function(e,n){const t=e=>n=>n.method.toLowerCase()===e.toLowerCase(),o=t("connect"),r=t("delete"),s=t("get"),i=t("head"),a=t("options"),u=t("patch"),c=t("post"),l=t("put"),p=t("trace"),d=e=>n=>{const t=new URL(n.url).pathname;return(t.match(e)||[])[0]===t};e.exports=class{constructor(){this.routes=[]}handle(e,n){return this.routes.push({conditions:e,handler:n}),this}connect(e,n){return this.handle([o,d(e)],n)}delete(e,n){return this.handle([r,d(e)],n)}get(e,n){return this.handle([s,d(e)],n)}head(e,n){return this.handle([i,d(e)],n)}options(e,n){return this.handle([a,d(e)],n)}patch(e,n){return this.handle([u,d(e)],n)}post(e,n){return this.handle([c,d(e)],n)}put(e,n){return this.handle([l,d(e)],n)}trace(e,n){return this.handle([p,d(e)],n)}all(e){return this.handle([],e)}route(e){const n=this.resolve(e);return n?n.handler(e):new Response("resource not found",{status:404,statusText:"not found",headers:{"content-type":"text/plain"}})}resolve(e){return this.routes.find(n=>!(n.conditions&&(!Array.isArray(n)||n.conditions.length))||("function"==typeof n.conditions?n.conditions(e):n.conditions.every(n=>n(e))))}}},function(e,n){e.exports={generatePrompt:(e,n,t,o)=>{const r=((e,n)=>{const t=[];return t.push("The following are responses to hackathon application questions from a student who is: "),t.push(e.join(", ")),t.push(". Their experiences include being "),t.push(n.join(", ")),t.push("."),t.join("")})(e,n),s=(e=>{if(!e.length)return"";const n=[];for(const t of e)n.push("###"),n.push("Question: "+t.question),n.push("Answer: "+t.answer);return n.join("\n")})(t);return s?r+"\n"+s+"\n"+o:r+o}}}]);